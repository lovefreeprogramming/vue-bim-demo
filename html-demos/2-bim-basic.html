<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>XXX</title>

    <!-- Import BIMface-->
    <script src="./utils/BimfaceSDKLoader.js" charset="utf-8"></script>

    <!-- Import style -->
    <link rel="stylesheet" href="./utils/ele.css" />
    <!-- Import component library -->
    <script src="./utils/ele.js"></script>
</head>

<body>
    <div id="app"></div>
</body>


<script type="module">
    import { createApp, ref, onMounted } from './utils/vue.esm-browser.js'

    const App = {
        template: `
          <div>
            <div>count:{{ count }}</div>
            <button @click="add">点击</button>
            <div id="domId" style="width:800px; height:600px"></div>
          </div>`,
        setup() {
            const count=ref(0);
            const add = () => {
                count.value=count.value+1
            }

            let viewer3D;
            let app;
            let viewToken = 'c943c4b5604d4eb3a83d2159e8cbe9b9';
            let loaderConfig = new BimfaceSDKLoaderConfig();
            loaderConfig.viewToken = viewToken;

            onMounted(() => {
                mBimfaceSDKLoader.load(loaderConfig, successCallback, failureCallback);
            })
            
            function successCallback(viewMetaData) {
                    let domShow = document.getElementById('domId');
                    let webAppConfig = new Glodon.Bimface.Application.WebApplication3DConfig();
                    webAppConfig.domElement = domShow;
                    app = new Glodon.Bimface.Application.WebApplication3D(webAppConfig);
                    app.addView(viewToken);
                    viewer3D = app.getViewer();
                }

            function failureCallback(error) {
                console.log(error);
            }

            return{
                count,
                add
            }
        }
    }

    createApp(App).mount('#app');

</script>

</html>
